"use strict";angular.module("cypress",["ngAnimate","ngCookies","ngSanitize","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("charts",{url:"/charts",templateUrl:"app/charts/charts.html",controller:"ChartsCtrl"}),t.otherwise("/")}]),angular.module("cypress").controller("MainCtrl",["$scope",function(e){e.awesomeThings=[{key:"angular",title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{key:"browsersync",title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{key:"gulp",title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{key:"jasmine",title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{key:"karma",title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{key:"protractor",title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{key:"jquery",title:"jQuery",url:"http://jquery.com/",description:"jQuery is a fast, small, and feature-rich JavaScript library.",logo:"jquery.jpg"},{key:"bootstrap",title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{key:"node-sass",title:"Sass (Node)",url:"https://github.com/sass/node-sass",description:"Node.js binding to libsass, the C version of the popular stylesheet preprocessor, Sass.",logo:"node-sass.png"}],angular.forEach(e.awesomeThings,function(e){e.rank=Math.random()})}]),angular.module("cypress").controller("ChartsCtrl",["$scope","$http","$filter","$q",function(e,t,a,r){e.model={data:{url:"http://maps2.dcgis.dc.gov/dcgis/rest/services/DCGIS_DATA/Education_WebMercator/MapServer/5"},style:"scatter",styleObj:{},styleJson:"{}",canRender:!1},e.canRender=function(){return e.model.canRender},e.fetchStyle=function(t){Cedar.fetchStyle(t.style,e.fetchStyleCallback)},e.fetchStyleCallback=function(t){e.model.styleObj=t,e.model.styleJson=a("json")(t),e.model.canRender=!0,e.model.data.inputs=t.inputs,e.$apply()},e.fetchJson=function(e){var a=r.defer();return t({method:"GET",url:e}).success(function(e){a.resolve(e)}).error(function(){console.error("Error featching feature layer json! Url "+e),a.reject("Error fetching "+e)}),a.promise},e.updateChart=function(t){var a={};angular.forEach(t.params,function(e,t){a[t]=e.name}),a.url=t.data.url,a.el="#chart-area";var r=JSON.parse(e.model.styleJson);Cedar.setStyle(r),Cedar.generate(a)},e.setupEditor=function(t){var o=t.data.url+"?f=json",s=Cedar.getStyleUrl(t.style),l=e.fetchJson(o),n=e.fetchJson(s);r.all([l,n]).then(function(t){e.model.data.fields=t[0].fields,e.model.styleObj=t[1],e.model.styleJson=a("json")(t[1]),e.model.canRender=!0,e.model.data.inputs=t[1].inputs}).catch(function(){console.error("Error setting up the editor")})},e.fetchFields=function(t){var a=t.data.url+"?f=json";e.fetchJson(a).then(function(t){e.model.data.fields=t.fields}).catch(function(){console.error("Error featching feature layer json! Url "+a)})}}]),angular.module("cypress").controller("NavbarCtrl",["$scope",function(e){e.date=new Date}]),function(e){try{e=angular.module("cypress")}catch(t){e=angular.module("cypress",[])}e.run(["$templateCache",function(e){e.put("components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular">Cypress</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li ui-sref-active="active"><a ui-sref="home">Home</a></li><li ui-sref-active="active"><a ui-sref="charts">My Charts</a></li></ul></div></nav>')}])}(),function(e){try{e=angular.module("cypress")}catch(t){e=angular.module("cypress",[])}e.run(["$templateCache",function(e){e.put("app/charts/charts.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><form role="form"><div class="row"><div class="col-lg-4 col-sm-6 col-md-4"><div class="form-group"><h3>Chart Data <small>Url to Feature Layer</small></h3><input type="text" class="form-control" placeholder="Data Url" ng-model="model.data.url"></div><div class="form-group"><h3>Chart Style <small>(name, url, or ago id)</small></h3><input type="text" class="form-control" ng-model="model.style" placeholder="Style Url"></div><div class="form-group"><button class="btn btn-success btn-block" type="button" ng-click="setupEditor(model)">Setup Editor</button></div><div class="form-group"><div ng-repeat="input in model.data.inputs"><div ng-if=""><label>{{input.name}}</label><select class="form-control" ng-model="model.params[input.name]" ng-options="field.name for field in model.data.fields"></select></div></div><div class="form-group" ng-hide="true"><label for="">Style Json</label> <textarea ng-model="model.styleJson" class="form-control" rows="20"></textarea></div><button class="btn btn-primary  btn-block" ng-click="updateChart(model)" ng-disabled="!canRender()">Render Chart</button></div><div class="col-lg-8"><h3>Chart View</h3><div id="chart-area"></div></div></div><div class="row"><div class="col-lg-4"><button class="btn green">Save to Online</button></div><div class="col-lg-4"><input placeholder="ago item id"></div><div class="col-lg-4"><button class="btn green">Load from Online</button></div></div></div></form><hr><div class="footer"><p>With ♥ from <a href="http://dc.esri.com">@EsriDC</a></p></div></div>')}])}(),function(e){try{e=angular.module("cypress")}catch(t){e=angular.module("cypress",[])}e.run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="jumbotron text-center"><h1>Charts Json</h1><p class="lead">Exploring Possibilities</p><p><a class="btn btn-lg btn-success" ui-sref="charts">Chart me!</a></p></div><div class="row" ng-hide="true"><div class="col-sm-6 col-md-4" ng-repeat="awesomeThing in awesomeThings | orderBy:\'rank\'"><div class="thumbnail"><img class="pull-right" ng-src="assets/images/{{awesomeThing.logo}}" alt="{{awesomeThing.title}}"><div class="caption"><h3>{{awesomeThing.title}}</h3><p>{{awesomeThing.description}}</p><p><a ng-href="{{awesomeThing.url}}">{{awesomeThing.url}}</a></p></div></div></div></div><hr><div class="footer"><p>With ♥ from <a href="http://dc.esri.com">@EsriDC</a></p></div></div>')}])}();